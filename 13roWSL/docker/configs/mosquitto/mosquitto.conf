# Configurație Mosquitto MQTT Broker
# Laborator Săptămâna 13 - IoT și Securitate
# Curs REȚELE DE CALCULATOARE - ASE, Informatică | de Revolvix
#
# AVERTISMENT: Această configurație este INTENȚIONAT NESIGURĂ
# pentru scopuri educaționale. NU utilizați în producție!

# ==============================================================================
# SETĂRI GENERALE
# ==============================================================================

# Permite conexiuni anonime (fără autentificare)
# NESIGUR în producție - doar pentru laborator!
allow_anonymous true

# Dezactivează persistența pentru performanță
persistence false

# Logging
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information

# ==============================================================================
# LISTENER TEXT CLAR (PORT 1883)
# ==============================================================================

# Listener principal pe portul 1883 (fără criptare)
listener 1883
protocol mqtt

# Permite acces de pe orice adresă
# NESIGUR - doar pentru rețeaua Docker izolată
socket_domain ipv4

# ==============================================================================
# LISTENER TLS (PORT 8883)
# ==============================================================================

# Listener securizat pe portul 8883 (cu TLS)
listener 8883
protocol mqtt

# Certificate TLS
cafile /mosquitto/certs/ca.crt
certfile /mosquitto/certs/server.crt
keyfile /mosquitto/certs/server.key

# Necesită certificat client (dezactivat pentru simplitate în laborator)
require_certificate false

# Versiune TLS minimă
tls_version tlsv1.2

# ==============================================================================
# SETĂRI CONEXIUNE
# ==============================================================================

# Dimensiune maximă pachet (în bytes)
message_size_limit 1048576

# Timeout conexiune (în secunde)
keepalive_interval 60

# Număr maxim de conexiuni
max_connections 100

# ==============================================================================
# MESAJE REȚINUTE ȘI QOS
# ==============================================================================

# Permite mesaje reținute
retain_available true

# Expire mesaje reținute după 24 ore (în secunde)
# message_expiry_interval 86400
